<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
    <script src="js/mui.min.js"></script>
    <script src="js/connectnet.js"></script>
    <link href="css/mui.min.css" rel="stylesheet"/>
    <style type="text/css">
		.div-inline{ display:inline-block;width: 49%;padding: 5px;text-align: center;} 
		/*main-bgColor{background:-webkit-gradient()}*/
		.main-bgImg{
			height: 100%;
			background-image: url(images/back.jpg);
		}
		.div-circle{
			display: inline-block;
			vertical-align: middle;
			width: 68px;
			height: 68px;
			border-radius: 50%;
			border: 2px solid black;
			border-color: rgba(100, 197, 205, 0.2);
			padding: 25px 0px;
			margin-bottom: -10px;
			font-size: 10px;
			background: rgba(255,255,255,0.2);
		}
		
		.big-circle{
			background: lightblue;
			width: 100px;
			height: 100px;
			margin: -10px;
			padding-top: 15px;
		}
		
		.inner-circle{
			background: white;
			display: inline-block;
			vertical-align: middle;
			width: 70px;
			height: 70px;
			border-radius: 50%;
			border: 1px solid blue ;
			border-color: rgba(255, 255, 255, 0.5);
			padding-top: 10px;
		}
		.font-css1{color: #333333;font-size: 25px;}
		.font-css2{color: #333333;font-size: 13px;}
		.font-css3{color: #333333;line-height: 2.5em;font-size: 18px;}
		.font-css4{color: lightcoral;font-size: 18px;}
		
		.font-css5{color: #333333;font-size: 24px;}
		
		.font-css6{line-height: 1em;padding: 5px;font-size: 20px;}
		
		.air-btn .div-circle{margin: 20px 10px;}
		
		.mt30{margin-top: 30px;}
		.mt20{margin-top: 20px;}
		.mt10{margin-top: 10px;}
		
		.ok-btn{border: 1px solid #E3E3E3;padding: 5px auto;background: ;}
			
	</style>
	
</head>
<body>

	 <!-- 主界面菜单同时移动 -->
	     <!-- 侧滑导航根容器 -->
	     <div class="mui-off-canvas-wrap mui-draggable">
	         <!-- 主页面容器 -->
	         <div class="mui-inner-wrap">
	             <!-- 菜单容器 -->
	             <aside class="mui-off-canvas-left" id="offCanvasSide">
	                 <div class="mui-scroll-wrapper">
	                     <div class="mui-scroll">
	                         <!-- 菜单具体展示内容 -->
	                         
	                     </div>
	                 </div>
	             </aside>
	             <!-- 主页面标题 -->
	             <header class="mui-bar mui-bar-nav main-bgColor">
	                 <a class="mui-icon mui-action-menu mui-icon-close mui-pull-left" href="#offCanvasSide"></a>
	                 <h1 class="mui-title">福睿禧环保科技</h1>
	                 <a class="mui-icon mui-action-menu mui-icon-bars mui-pull-right" href="#offCanvasSide"></a>
	             </header>
	             <nav class="mui-bar mui-bar-tab main-bgColor">
	     		    <a class="mui-tab-item mui-active">
	     		        <span class="mui-icon mui-icon-home"></span>
	     		        <span class="mui-tab-label">社区</span>
	     		    </a>
	     		    <a class="mui-tab-item">
	     		        <span class="mui-icon mui-icon-phone"></span>
	     		        <span class="mui-tab-label">修报</span>
	     		    </a>
	     		    <a class="mui-tab-item">
	     		        <span class="mui-icon mui-icon-email"></span>
	     		        <span class="mui-tab-label">预设</span>
	     		    </a>
	     		    <a class="mui-tab-item">
	     		        <span class="mui-icon mui-icon-person"></span>
	     		        <span class="mui-tab-label">我</span>
	     		    </a>
	     		</nav>
	             <!-- 主页面内容容器 -->
	    	<div class="mui-content main-bgImg mui-scroll-wrapper ">
	    		<div class="mui-scroll">
	    			<div class="mui-row mt10">
						<div class="mui-col-xs-3 mui-text-center">
							状态：on
						</div>
						<div class="mui-col-xs-6 mui-text-center">
							室外温度：35℃
						</div>
					</div>
			    	<div class="mui-row mt20">
			        	<div class="mui-col-xs-6 mui-text-center">
			        		<div class="wd1 div-circle" id="wendu">
			        			<div class="font-css1">16</div>
			        			<div class="font-css2">舒适</div>
			        		</div>
			        		<div class="font-css3">温度℃</div>
			        	</div>
				        <div class="mui-col-xs-6 mui-text-center">
				        	<div class="div-circle" id="shidu">
				        		<div class="font-css1">13.8</div>
				        		<div class="font-css2">较干</div>
				        	</div>
				        	<div class="font-css3">湿度%</div>
				        </div>
				        <div class="mui-col-xs-12 mui-text-center">
				        	<div class="div-circle big-circle">
				        		<div class="inner-circle" id="pm">
				        			<div class="font-css4">PM2.5</div>
					        		<div class="font-css1">34</div>
					        		<div class="font-css2">优良</div>
				        		</div>
				        	</div>
				        </div>
				    </div>
				    <div class="mui-row">
				        <div class="mui-col-xs-6 mui-text-center">
				        	<div class="div-circle" id="eryht">
				        		<div class="font-css1">232</div>
				        		<div class="font-css2">清新</div>
				        	</div>
				        	<div class="font-css3">二氧化碳PPM</div>
				        </div>
				        <div class="mui-col-xs-6 mui-text-center">
				        	<div class="div-circle" id="wuran">
				        		<div class="font-css1">0.76</div>
				        		<div class="font-css2">轻度污染</div>
				        	</div>
				        	<div class="font-css3">TVOC mg/㎡ </div>
				        </div>
			    	</div>
			    	<div class="mui-col-xs-50 mui-text-center">
			    		<img src="images/logo.1.png"/>
			    	</div>
					<div class="mui-content">
						<button id='showUserPicker' class="mui-btn mui-btn-block" type='button'>选择机器型号...</button>
			    	</div>
		    	</div>
			</div>
		</div>
	
	<script type="text/javascript" src="js/jquery.min.js" ></script>
	<script type="text/javascript" src="js/req.js" ></script>
	<script type="text/javascript" charset="utf-8">
		mui('.mui-scroll-wrapper').scroll({
	        deceleration: 0.0005 //flick 减速系数，系数越大，滚动速度越慢，滚动距离越小，默认值0.0006
	    });
      	mui.plusReady(function(){
      		mui.toast("硬件api准备成功！");
    	})
      	
      	 * 定时任务刷新请求获取空调数据
      	 */
      	var task1 = window.setInterval(function(){
      		getAirData();
      	},3000);
      	
      	
      	/**
      	 * 获取空调温度、湿度、PM2.5、二氧化碳、污染数据
      	 */
      	function getAirData(){
      		/* httpReq: req.js中的全局对象 */
      		httpReq.queryAirUnitMsg(function(data){
	      		//mui.toast(JSON.stringify(data));
	      		var data = data.MachineMsg;
	      		data = data.replace(/'/g,'"');
	      		data = JSON.parse(data);
	      		$("#wendu .font-css1").text(data.weidu);
	  			$("#shidu .font-css1").text(data.shidu);
	  			$("#pm .font-css1").text(data.pmval);
	  			$("#eryht .font-css1").text(data.eryht);
	  			$("#wuran .font-css1").text(data.tvoc);
	  		});
      	}
      	
      	
      	/**
      	 * 1.2 用户登录
      	 */
      	httpReq.login(function(data){
      		mui.toast(JSON.stringify(data));
      	});
      	
      	$.ready(function() {
					/**
					 * 获取对象属性的值
					 * 主要用于过滤三级联动中，可能出现的最低级的数据不存在的情况，实际开发中需要注意这一点；
					 * @param {Object} obj 对象
					 * @param {String} param 属性名
					 */
					var _getParam = function(obj, param) {
						return obj[param] || '';
					};
					//普通示例
					var userPicker = new $.PopPicker();
					userPicker.setData([{
						value: 'ywj',
						text: '董事长 叶文洁'
					}, {
						value: 'aaa',
						text: '总经理 艾AA'
					}, {
						value: 'lj',
						text: '罗辑'
					}, {
						value: 'ymt',
						text: '云天明'
					}, {
						value: 'shq',
						text: '史强'
					}, {
						value: 'zhbh',
						text: '章北海'
					}, {
						value: 'zhy',
						text: '庄颜'
					}, {
						value: 'gyf',
						text: '关一帆'
					}, {
						value: 'zhz',
						text: '智子'
					}, {
						value: 'gezh', 
						text: '歌者'
					}]);
					var showUserPickerButton = doc.getElementById('showUserPicker');
					var userResult = doc.getElementById('userResult');
					showUserPickerButton.addEventListener('tap', function(event) {
						userPicker.show(function(items) {
							userResult.innerText = JSON.stringify(items[0]);
							//返回 false 可以阻止选择框的关闭
							//return false;
						});
					}, false);
					//-----------------------------------------
					//级联示例
					var cityPicker = new $.PopPicker({
						layer: 2
					});
					cityPicker.setData(cityData);
					var showCityPickerButton = doc.getElementById('showCityPicker');
					var cityResult = doc.getElementById('cityResult');
					showCityPickerButton.addEventListener('tap', function(event) {
						cityPicker.show(function(items) {
							cityResult.innerText = "你选择的城市是:" + items[0].text + " " + items[1].text;
							//返回 false 可以阻止选择框的关闭
							//return false;
						});
					}, false);
					//-----------------------------------------
					//					//级联示例
					var cityPicker3 = new $.PopPicker({
						layer: 3
					});
					cityPicker3.setData(cityData3);
					var showCityPickerButton = doc.getElementById('showCityPicker3');
					var cityResult3 = doc.getElementById('cityResult3');
					showCityPickerButton.addEventListener('tap', function(event) {
						cityPicker3.show(function(items) {
							cityResult3.innerText = "你选择的城市是:" + _getParam(items[0], 'text') + " " + _getParam(items[1], 'text') + " " + _getParam(items[2], 'text');
							//返回 false 可以阻止选择框的关闭
							//return false;
						});
					}, false);
				});
    </script>
</body>
</html>